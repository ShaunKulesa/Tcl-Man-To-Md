<!DOCTYPE html>
<html lang="en">
    <head>
      <script>
	// Hack for scrolling window when linking to anchor tag with fixed nav header
        var shiftWindow = function() { scrollBy(0, -75) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://www.tcl.tk/man/TkLib/CrtErrHdlr/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>CrtErrHdlr - Tcl/Tk</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="../../js/base.js"></script> 
    </head>

    <body class="">

      <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
	<div class="container">
	<a class="navbar-brand" href="../..">Tcl/Tk</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse">

          <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex">
            <li class="nav-item">
              <a class="nav-link" href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
		<i class="fa fa-search"></i> Search
              </a>
            </li>
          </ul>
	</div>
	</div>
      </nav><div id="content" class="container">
        
      <div class="row">
        <div class="col-md-9" role="main">


<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    
    <li class="breadcrumb-item active" aria-current="page">CrtErrHdlr</li>
  </ol>
</nav>


<p>\</p>
<h1 id="name">NAME</h1>
<p>Tk_CreateErrorHandler, Tk_DeleteErrorHandler - handle X protocol errors</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p><strong>#include \&lt;tk.h></strong></p>
<p>Tk_ErrorHandler <strong>Tk_CreateErrorHandler</strong>(<em>display, error, request,
minor, proc, clientData</em>)</p>
<p><strong>Tk_DeleteErrorHandler</strong>(<em>handler</em>)</p>
<h1 id="arguments">ARGUMENTS</h1>
<p>Display whose errors are to be handled.</p>
<p>Match only error events with this value in the <em>error_code</em> field. If
-1, then match any <em>error_code</em> value.</p>
<p>Match only error events with this value in the <em>request_code</em> field. If
-1, then match any <em>request_code</em> value.</p>
<p>Match only error events with this value in the <em>minor_code</em> field. If
-1, then match any <em>minor_code</em> value.</p>
<p>Procedure to invoke whenever an error event is received for <em>display</em>
and matches <em>error</em>, <em>request</em>, and <em>minor</em>. NULL means ignore any
matching errors.</p>
<p>Arbitrary one-word value to pass to <em>proc</em>.</p>
<p>Token for error handler to delete (return value from a previous call to
<strong>Tk_CreateErrorHandler</strong>).</p>
<p>\</p>
<h1 id="description">DESCRIPTION</h1>
<p><strong>Tk_CreateErrorHandler</strong> arranges for a particular procedure (<em>proc</em>)
to be called whenever certain protocol errors occur on a particular
display (<em>display</em>). Protocol errors occur when the X protocol is used
incorrectly, such as attempting to map a window that does not exist. See
the Xlib documentation for <strong>XSetErrorHandler</strong> for more information on
the kinds of errors that can occur. For <em>proc</em> to be invoked to handle a
particular error, five things must occur:</p>
<p>[1]</p>
<p>:   The error must pertain to <em>display</em>.</p>
<p>[2]</p>
<p>:   Either the <em>error</em> argument to <strong>Tk_CreateErrorHandler</strong> must have
    been -1, or the <em>error</em> argument must match the <em>error_code</em> field
    from the error event.</p>
<p>[3]</p>
<p>:   Either the <em>request</em> argument to <strong>Tk_CreateErrorHandler</strong> must have
    been -1, or the <em>request</em> argument must match the <em>request_code</em>
    field from the error event.</p>
<p>[4]</p>
<p>:   Either the <em>minor</em> argument to <strong>Tk_CreateErrorHandler</strong> must have
    been -1, or the <em>minor</em> argument must match the <em>minor_code</em> field
    from the error event.</p>
<p>[5]</p>
<p>:   The protocol request to which the error pertains must have been made
    when the handler was active (see below for more information).</p>
<p><em>Proc</em> should have arguments and result that match the following type:</p>
<div class="language-text highlight"><pre><span></span><code>typedef int Tk_ErrorProc(
        ClientData clientData,
        XErrorEvent *errEventPtr);
</code></pre></div>
<p>The <em>clientData</em> parameter to <em>proc</em> is a copy of the <em>clientData</em>
argument given to <strong>Tcl_CreateErrorHandler</strong> when the callback was
created. Typically, <em>clientData</em> points to a data structure containing
application-specific information that is needed to deal with the error.
<em>ErrEventPtr</em> is a pointer to the X error event. The procedure <em>proc</em>
should return an integer value. If it returns 0 it means that <em>proc</em>
handled the error completely and there is no need to take any other
action for the error. If it returns non-zero it means <em>proc</em> was unable
to handle the error.</p>
<p>If a value of NULL is specified for <em>proc</em>, all matching errors will be
ignored: this will produce the same result as if a procedure had been
specified that always returns 0.</p>
<p>If more than more than one handler matches a particular error, then they
are invoked in turn. The handlers will be invoked in reverse order of
creation: most recently declared handler first. If any handler returns
0, then subsequent (older) handlers will not be invoked. If no handler
returns 0, then Tk invokes X\'s default error handler, which prints an
error message and aborts the program. If you wish to have a default
handler that deals with errors that no other handler can deal with, then
declare it first.</p>
<p>The X documentation states that This restriction applies to handlers
declared by <strong>Tk_CreateErrorHandler</strong>; disobey it at your own risk.</p>
<p><strong>Tk_DeleteErrorHandler</strong> may be called to delete a previously-created
error handler. The <em>handler</em> argument identifies the error handler, and
should be a value returned by a previous call to
<strong>Tk_CreateEventHandler</strong>.</p>
<p>A particular error handler applies to errors resulting from protocol
requests generated between the call to <strong>Tk_CreateErrorHandler</strong> and the
call to <strong>Tk_DeleteErrorHandler</strong>. However, the actual callback to
<em>proc</em> may not occur until after the <strong>Tk_DeleteErrorHandler</strong> call, due
to buffering in the client and server. If an error event pertains to a
protocol request made just before calling <strong>Tk_DeleteErrorHandler</strong>,
then the error event may not have been processed before the
<strong>Tk_DeleteErrorHandler</strong> call. When this situation arises, Tk will save
information about the handler and invoke the handler\'s <em>proc</em> later
when the error event finally arrives. If an application wishes to delete
an error handler and know for certain that all relevant errors have been
processed, it should first call <strong>Tk_DeleteErrorHandler</strong> and then call
<strong>XSync</strong>; this will flush out any buffered requests and errors, but
will result in a performance penalty because it requires communication
to and from the X server. After the <strong>XSync</strong> call Tk is guaranteed not
to call any error handlers deleted before the <strong>XSync</strong> call.</p>
<p>For the Tk error handling mechanism to work properly, it is essential
that application code never calls <strong>XSetErrorHandler</strong> directly;
applications should use only <strong>Tk_CreateErrorHandler</strong>.</p>
<h1 id="keywords">KEYWORDS</h1>
<p>callback, error, event, handler</p>

<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
  <li class="last-updated-holder displayDate loading">
    <span class="last-updated-text">Last updated:</span>
    <time role="presentation" datetime="2018-10-25T00:00:00.000Z" data-article-date-source="ms.date"></time>
  </li>
<!--
  <li class="readingTime">
    2 minutes to read
  </li>
-->
  <li class="contributors-holder">
    <span class="contributors-text">Contributors</span>
    <ul class="contributors" data-bi-name="contributors"></ul>
  </li>
</ul>
</div>
        <div class="col-md-3"><div class="navbar-light navbar-expand-md hidden-print sticky-top sticky-offset" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    <div id="toc-collapse" class="navbar-collapse collapse card">
        <ul class="nav flex-column bs-sidenav">
            <li class="nav-item main"><a class="nav-link" href="#name">NAME</a></li>
            <li class="nav-item main"><a class="nav-link" href="#synopsis">SYNOPSIS</a></li>
            <li class="nav-item main"><a class="nav-link" href="#arguments">ARGUMENTS</a></li>
            <li class="nav-item main"><a class="nav-link" href="#description">DESCRIPTION</a></li>
            <li class="nav-item main"><a class="nav-link" href="#keywords">KEYWORDS</a></li>
        </ul>
    </div>
</div></div>
      </div>
      </div>

      <footer class="col-md-12">
	<hr>
	<div class="container">
	</div>
      </footer>
      <script>
	var base_url = "../..",
            shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
      </script>
      <script src="../../js/base.js" defer></script>
      <script src="../../search/main.js" defer></script>

      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <p class="h4 modal-title">Keyboard Shortcuts</p>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
