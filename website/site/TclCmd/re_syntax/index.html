<!DOCTYPE html>
<html lang="en">
    <head>
      <script>
	// Hack for scrolling window when linking to anchor tag with fixed nav header
        var shiftWindow = function() { scrollBy(0, -75) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
      </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://www.tcl.tk/man/TclCmd/re_syntax/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Re syntax - Tcl/Tk</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="../../js/base.js"></script> 
    </head>

    <body class="">

      <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
	<div class="container">
	<a class="navbar-brand" href="../..">Tcl/Tk</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse">

          <ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex">
            <li class="nav-item">
              <a class="nav-link" href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
		<i class="fa fa-search"></i> Search
              </a>
            </li>
          </ul>
	</div>
	</div>
      </nav><div id="content" class="container">
        
      <div class="row">
        <div class="col-md-9" role="main">


<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    
    <li class="breadcrumb-item active" aria-current="page">Re syntax</li>
  </ol>
</nav>


<p>\</p>
<h1 id="name">NAME</h1>
<p>re_syntax - Syntax of Tcl regular expressions</p>
<p>\</p>
<h1 id="description">DESCRIPTION</h1>
<p>A <em>regular expression</em> describes strings of characters. It\'s a pattern
that matches certain strings and does not match others.</p>
<h1 id="different-flavors-of-res">DIFFERENT FLAVORS OF REs</h1>
<p>Regular expressions as defined by POSIX, come in two flavors: <em>extended</em>
REs and <em>basic</em> REs EREs are roughly those of the traditional <em>egrep</em>,
while BREs are roughly those of the traditional <em>ed</em>. This
implementation adds a third flavor, <em>advanced</em> REs basically EREs with
some significant extensions.</p>
<p>This manual page primarily describes AREs. BREs mostly exist for
backward compatibility in some old programs; they will be discussed at
the end. POSIX EREs are almost an exact subset of AREs. Features of AREs
that are not present in EREs will be indicated.</p>
<h1 id="regular-expression-syntax">REGULAR EXPRESSION SYNTAX</h1>
<p>Tcl regular expressions are implemented using the package written by
Henry Spencer, based on the 1003.2 spec and some (not quite all) of the
Perl5 extensions (thanks, Henry!). Much of the description of regular
expressions below is copied verbatim from his manual entry.</p>
<p>An ARE is one or more <em>branches</em>, separated by matching anything that
matches any of the branches.</p>
<p>A branch is zero or more <em>constraints</em> or <em>quantified atoms</em>,
concatenated. It matches a match for the first, followed by a match for
the second, etc; an empty branch matches the empty string.</p>
<h2 id="quantifiers">QUANTIFIERS</h2>
<p>A quantified atom is an <em>atom</em> possibly followed by a single
<em>quantifier</em>. Without a quantifier, it matches a single match for the
atom. The quantifiers, and what a so-quantified atom matches, are:</p>
<blockquote>
<p><strong>*</strong></p>
<p>:   a sequence of 0 or more matches of the atom</p>
<p><strong>+</strong></p>
<p>:   a sequence of 1 or more matches of the atom</p>
<p><strong>?</strong></p>
<p>:   a sequence of 0 or 1 matches of the atom</p>
<p><strong>{</strong><em>m</em><strong>}</strong></p>
<p>:   a sequence of exactly <em>m</em> matches of the atom</p>
<p><strong>{</strong><em>m</em><strong>,}</strong></p>
<p>:   a sequence of <em>m</em> or more matches of the atom</p>
<p><strong>{</strong><em>m</em><strong>,</strong><em>n</em><strong>}</strong></p>
<p>:   a sequence of <em>m</em> through <em>n</em> (inclusive) matches of the atom; <em>m</em>
    may not exceed <em>n</em></p>
<p><strong>*? +? ?? {</strong><em>m</em><strong>}? {</strong><em>m</em><strong>,}? {</strong><em>m</em><strong>,</strong><em>n</em><strong>}?</strong></p>
<p>:   <em>non-greedy</em> quantifiers, which match the same possibilities, but
    prefer the smallest number rather than the largest number of
    matches (see <strong>MATCHING</strong>)</p>
</blockquote>
<p>The forms using <strong>{</strong> and <strong>}</strong> are known as <em>bound</em>s. The numbers <em>m</em>
and <em>n</em> are unsigned decimal integers with permissible values from 0 to
255 inclusive.</p>
<h2 id="atoms">ATOMS</h2>
<p>An atom is one of:</p>
<blockquote>
<p>(re)</p>
<p>:   matches a match for <em>re</em> (<em>re</em> is any regular expression) with the
    match noted for possible reporting</p>
<p>(?:re)</p>
<p>:   as previous, but does no reporting (a set of parentheses)</p>
<p>()</p>
<p>:   matches an empty string, noted for possible reporting</p>
<p>(?:)</p>
<p>:   matches an empty string, without reporting</p>
<p>[chars]</p>
<p>:   a <em>bracket expression</em>, matching any one of the <em>chars</em> (see
    <strong>BRACKET EXPRESSIONS</strong> for more detail)</p>
<p>.</p>
<p>:   matches any single character</p>
<p>\k</p>
<p>:   matches the non-alphanumeric character <em>k</em> taken as an ordinary
    character, e.g. <strong>\\</strong> matches a backslash character</p>
<p>\c</p>
<p>:   where <em>c</em> is alphanumeric (possibly followed by other characters),
    an <em>escape</em> (AREs only), see <strong>ESCAPES</strong> below</p>
<p>{</p>
<p>:   when followed by a character other than a digit, matches the
    left-brace character when followed by a digit, it is the beginning
    of a <em>bound</em> (see above)</p>
<p>x.  where <em>x</em> is a single character with no other significance,
    matches that character.</p>
</blockquote>
<h2 id="constraints">CONSTRAINTS</h2>
<p>A <em>constraint</em> matches an empty string when specific conditions are met.
A constraint may not be followed by a quantifier. The simple constraints
are as follows; some more constraints are described later, under
<strong>ESCAPES</strong>.</p>
<blockquote>
<p><strong>\^</strong></p>
<p>:   matches at the beginning of the string or a line (according to
    whether matching is newline-sensitive or not, as described in
    <strong>MATCHING</strong>, below).</p>
<p><strong>\$</strong></p>
<p>:   matches at the end of the string or a line (according to whether
    matching is newline-sensitive or not, as described in
    <strong>MATCHING</strong>, below).</p>
<div class="language-text highlight"><pre><span></span><code>The difference between string and line matching modes is
immaterial when the string does not contain a newline character.
The **\\A** and **\\Z** constraint escapes have a similar purpose
but are always constraints for the overall string.

The default newline-sensitivity depends on the command that uses
the regular expression, and can be overridden as described in
**METASYNTAX**, below.
</code></pre></div>
<p><strong>(?=</strong><em>re</em><strong>)</strong></p>
<p>:   <em>positive lookahead</em> (AREs only), matches at any point where a
    substring matching <em>re</em> begins</p>
<p><strong>(?!</strong><em>re</em><strong>)</strong></p>
<p>:   <em>negative lookahead</em> (AREs only), matches at any point where no
    substring matching <em>re</em> begins</p>
</blockquote>
<p>The lookahead constraints may not contain back references (see later),
and all parentheses within them are considered non-capturing.</p>
<p>An RE may not end with</p>
<h1 id="bracket-expressions">BRACKET EXPRESSIONS</h1>
<p>A <em>bracket expression</em> is a list of characters enclosed in It normally
matches any single character from the list (but see below). If the list
begins with it matches any single character (but see below) <em>not</em> from
the rest of the list.</p>
<p>If two characters in the list are separated by this is shorthand for the
full <em>range</em> of characters between those two (inclusive) in the
collating sequence, e.g. in Unicode matches any conventional decimal
digit. Two ranges may not share an endpoint, so e.g. is illegal. Ranges
in Tcl always use the Unicode collating sequence, but other programs may
use other collating sequences and this can be a source of
incompatibility between programs.</p>
<p>To include a literal <strong>]</strong> or <strong>-</strong> in the list, the simplest method is
to enclose it in <strong>[.</strong> and <strong>.]</strong> to make it a collating element (see
below). Alternatively, make it the first character (following a possible
or (AREs only) precede it with Alternatively, for make it the last
character, or the second endpoint of a range. To use a literal <strong>-</strong> as
the first endpoint of a range, make it a collating element or (AREs
only) precede it with With the exception of these, some combinations
using <strong>[</strong> (see next paragraphs), and escapes, all other special
characters lose their special significance within a bracket expression.</p>
<h2 id="character-classes">CHARACTER CLASSES</h2>
<p>Within a bracket expression, the name of a <em>character class</em> enclosed in
<strong>[:</strong> and <strong>:]</strong> stands for the list of all characters (not all
collating elements!) belonging to that class. Standard character classes
are:</p>
<p>alpha</p>
<p>:   A letter.</p>
<p>upper</p>
<p>:   An upper-case letter.</p>
<p>lower</p>
<p>:   A lower-case letter.</p>
<p>digit</p>
<p>:   A decimal digit.</p>
<p>xdigit</p>
<p>:   A hexadecimal digit.</p>
<p>alnum</p>
<p>:   An alphanumeric (letter or digit).</p>
<p>print</p>
<p>:   A \"printable\" (same as graph, except also including space).</p>
<p>blank</p>
<p>:   A space or tab character.</p>
<p>space</p>
<p>:   A character producing white space in displayed text.</p>
<p>punct</p>
<p>:   A punctuation character.</p>
<p>graph</p>
<p>:   A character with a visible representation (includes both <strong>alnum</strong>
    and <strong>punct</strong>).</p>
<p>cntrl</p>
<p>:   A control character.</p>
<p>A locale may provide others. A character class may not be used as an
endpoint of a range.</p>
<blockquote>
<p>(<em>Note:</em> the current Tcl implementation has only one locale, the
Unicode locale, which supports exactly the above classes.)</p>
</blockquote>
<h2 id="bracketed-constraints">BRACKETED CONSTRAINTS</h2>
<p>There are two special cases of bracket expressions: the bracket
expressions and are constraints, matching empty strings at the beginning
and end of a word respectively. A word is defined as a sequence of word
characters that is neither preceded nor followed by word characters. A
word character is an <em>alnum</em> character or an underscore These special
bracket expressions are deprecated; users of AREs should use constraint
escapes instead (see below).</p>
<h2 id="collating-elements">COLLATING ELEMENTS</h2>
<p>Within a bracket expression, a collating element (a character, a
multi-character sequence that collates as if it were a single character,
or a collating-sequence name for either) enclosed in <strong>[.</strong> and <strong>.]</strong>
stands for the sequence of characters of that collating element. The
sequence is a single element of the bracket expression\'s list. A
bracket expression in a locale that has multi-character collating
elements can thus match more than one character. So (insidiously), a
bracket expression that starts with <strong>\^</strong> can match multi-character
collating elements even if none of them appear in the bracket
expression!</p>
<blockquote>
<p>(<em>Note:</em> Tcl has no multi-character collating elements. This
information is only for illustration.)</p>
</blockquote>
<p>For example, assume the collating sequence includes a <strong>ch</strong>
multi-character collating element. Then the RE (zero or more followed by
matches the first five characters of Also, the RE matches all of
(because matches the multi-character</p>
<h2 id="equivalence-classes">EQUIVALENCE CLASSES</h2>
<p>Within a bracket expression, a collating element enclosed in <strong>[=</strong> and
<strong>=]</strong> is an equivalence class, standing for the sequences of
characters of all collating elements equivalent to that one, including
itself. (If there are no other equivalent collating elements, the
treatment is as if the enclosing delimiters were and For example, if
<strong>o</strong> and <strong>ô</strong> are the members of an equivalence class, then and are
all synonymous. An equivalence class may not be an endpoint of a range.</p>
<blockquote>
<p>(<em>Note:</em> Tcl implements only the Unicode locale. It does not define
any equivalence classes. The examples above are just illustrations.)</p>
</blockquote>
<h1 id="escapes">ESCAPES</h1>
<p>Escapes (AREs only), which begin with a <strong>\</strong> followed by an
alphanumeric character, come in several varieties: character entry,
class shorthands, constraint escapes, and back references. A <strong>\</strong>
followed by an alphanumeric character but not constituting a valid
escape is illegal in AREs. In EREs, there are no escapes: outside a
bracket expression, a <strong>\</strong> followed by an alphanumeric character
merely stands for that character as an ordinary character, and inside a
bracket expression, <strong>\</strong> is an ordinary character. (The latter is the
one actual incompatibility between EREs and AREs.)</p>
<h2 id="character-entry-escapes">CHARACTER-ENTRY ESCAPES</h2>
<p>Character-entry escapes (AREs only) exist to make it easier to specify
non-printing and otherwise inconvenient characters in REs:</p>
<blockquote>
<p><strong>\a</strong></p>
<p>:   alert (bell) character, as in C</p>
<p><strong>\b</strong></p>
<p>:   backspace, as in C</p>
<p><strong>\B</strong></p>
<p>:   synonym for <strong>\</strong> to help reduce backslash doubling in some
    applications where there are multiple levels of backslash
    processing</p>
<p><strong>\c</strong><em>X</em></p>
<p>:   (where <em>X</em> is any character) the character whose low-order 5 bits
    are the same as those of <em>X</em>, and whose other bits are all zero</p>
<p><strong>\e</strong></p>
<p>:   the character whose collating-sequence name is or failing that,
    the character with octal value 033</p>
<p><strong>\f</strong></p>
<p>:   formfeed, as in C</p>
<p><strong>\n</strong></p>
<p>:   newline, as in C</p>
<p><strong>\r</strong></p>
<p>:   carriage return, as in C</p>
<p><strong>\t</strong></p>
<p>:   horizontal tab, as in C</p>
<p><strong>\u</strong><em>wxyz</em></p>
<p>:   (where <em>wxyz</em> is one up to four hexadecimal digits) the Unicode
    character <strong>U+</strong><em>wxyz</em> in the local byte ordering</p>
<p><strong>\U</strong><em>stuvwxyz</em></p>
<p>:   (where <em>stuvwxyz</em> is one up to eight hexadecimal digits) reserved
    for a Unicode extension up to 21 bits. The digits are parsed until
    the first non-hexadecimal character is encountered, the maximun of
    eight hexadecimal digits are reached, or an overflow would occur
    in the maximum value of <strong>U+</strong><em>10ffff</em>.</p>
<p><strong>\v</strong></p>
<p>:   vertical tab, as in C are all available.</p>
<p><strong>\x</strong><em>hh</em></p>
<p>:   (where <em>hh</em> is one or two hexadecimal digits) the character whose
    hexadecimal value is <strong>0x</strong><em>hh</em>.</p>
<p><strong>\0</strong></p>
<p>:   the character whose value is <strong>0</strong></p>
<p><strong>\</strong><em>xyz</em></p>
<p>:   (where <em>xyz</em> is exactly three octal digits, and is not a <em>back</em>
    reference (see below)) the character whose octal value is
    <strong>0</strong><em>xyz</em>. The first digit must be in the range 0-3, otherwise
    the two-digit form is assumed.</p>
<p><strong>\</strong><em>xy</em></p>
<p>:   (where <em>xy</em> is exactly two octal digits, and is not a <em>back</em>
    reference (see below)) the character whose octal value is
    <strong>0</strong><em>xy</em></p>
</blockquote>
<p>Hexadecimal digits are and Octal digits are</p>
<p>The character-entry escapes are always taken as ordinary characters. For
example, <strong>\135</strong> is <strong>]</strong> in Unicode, but <strong>\135</strong> does not
terminate a bracket expression. Beware, however, that some applications
(e.g., C compilers and the Tcl interpreter if the regular expression is
not quoted with braces) interpret such sequences themselves before the
regular-expression package gets to see them, which may require doubling
(quadrupling, etc.) the</p>
<h2 id="class-shorthand-escapes">CLASS-SHORTHAND ESCAPES</h2>
<p>Class-shorthand escapes (AREs only) provide shorthands for certain
commonly-used character classes:</p>
<blockquote>
<p><strong>\d</strong></p>
<p>:   <strong>[[:digit:]]</strong></p>
<p><strong>\s</strong></p>
<p>:   <strong>[[:space:]]</strong></p>
<p><strong>\w</strong></p>
<p>:   <strong>[[:alnum:]_\u203F\u2040\u2054\uFE33\uFE34\uFE4D\uFE4E\uFE4F\uFF3F]</strong>
    (including punctuation connector characters)</p>
<p><strong>\D</strong></p>
<p>:   <strong>[\^[:digit:]]</strong></p>
<p><strong>\S</strong></p>
<p>:   <strong>[\^[:space:]]</strong></p>
<p><strong>\W</strong></p>
<p>:   <strong>[\^[:alnum:]_\u203F\u2040\u2054\uFE33\uFE34\uFE4D\uFE4E\uFE4F\uFF3F]</strong>
    (including punctuation connector characters)</p>
</blockquote>
<p>Within bracket expressions, and lose their outer brackets, and and are
illegal. (So, for example, is equivalent to Also, which is equivalent to
is illegal.)</p>
<h2 id="constraint-escapes">CONSTRAINT ESCAPES</h2>
<p>A constraint escape (AREs only) is a constraint, matching the empty
string if specific conditions are met, written as an escape:</p>
<blockquote>
<p><strong>\A</strong></p>
<p>:   matches only at the beginning of the string (see <strong>MATCHING</strong>,
    below, for how this differs from</p>
<p><strong>\m</strong></p>
<p>:   matches only at the beginning of a word</p>
<p><strong>\M</strong></p>
<p>:   matches only at the end of a word</p>
<p><strong>\y</strong></p>
<p>:   matches only at the beginning or end of a word</p>
<p><strong>\Y</strong></p>
<p>:   matches only at a point that is not the beginning or end of a word</p>
<p><strong>\Z</strong></p>
<p>:   matches only at the end of the string (see <strong>MATCHING</strong>, below,
    for how this differs from</p>
<p><strong>\</strong><em>m</em></p>
<p>:   (where <em>m</em> is a nonzero digit) a <em>back reference</em>, see below</p>
<p><strong>\</strong><em>mnn</em></p>
<p>:   (where <em>m</em> is a nonzero digit, and <em>nn</em> is some more digits, and
    the decimal value <em>mnn</em> is not greater than the number of closing
    capturing parentheses seen so far) a <em>back reference</em>, see below</p>
</blockquote>
<p>A word is defined as in the specification of and above. Constraint
escapes are illegal within bracket expressions.</p>
<h2 id="back-references">BACK REFERENCES</h2>
<p>A back reference (AREs only) matches the same string matched by the
parenthesized subexpression specified by the number, so that (e.g.)
matches or but not The subexpression must entirely precede the back
reference in the RE. Subexpressions are numbered in the order of their
leading parentheses. Non-capturing parentheses do not define
subexpressions.</p>
<p>There is an inherent historical ambiguity between octal character-entry
escapes and back references, which is resolved by heuristics, as hinted
at above. A leading zero always indicates an octal escape. A single
non-zero digit, not followed by another digit, is always taken as a back
reference. A multi-digit sequence not starting with a zero is taken as a
back reference if it comes after a suitable subexpression (i.e. the
number is in the legal range for a back reference), and otherwise is
taken as octal.</p>
<h1 id="metasyntax">METASYNTAX</h1>
<p>In addition to the main syntax described above, there are some special
forms and miscellaneous syntactic facilities available.</p>
<p>Normally the flavor of RE being used is specified by
application-dependent means. However, this can be overridden by a
<em>director</em>. If an RE of any flavor begins with the rest of the RE is an
ARE. If an RE of any flavor begins with the rest of the RE is taken to
be a literal string, with all characters considered ordinary characters.</p>
<p>An ARE may begin with <em>embedded options</em>: a sequence <strong>(?</strong><em>xyz</em><strong>)</strong>
(where <em>xyz</em> is one or more alphabetic characters) specifies options
affecting the rest of the RE. These supplement, and can override, any
options specified by the application. The available option letters are:</p>
<blockquote>
<p><strong>b</strong></p>
<p>:   rest of RE is a BRE</p>
<p><strong>c</strong></p>
<p>:   case-sensitive matching (usual default)</p>
<p><strong>e</strong></p>
<p>:   rest of RE is an ERE</p>
<p><strong>i</strong></p>
<p>:   case-insensitive matching (see <strong>MATCHING</strong>, below)</p>
<p><strong>m</strong></p>
<p>:   historical synonym for <strong>n</strong></p>
<p><strong>n</strong></p>
<p>:   newline-sensitive matching (see <strong>MATCHING</strong>, below)</p>
<p><strong>p</strong></p>
<p>:   partial newline-sensitive matching (see <strong>MATCHING</strong>, below)</p>
<p><strong>q</strong></p>
<p>:   rest of RE is a literal string, all ordinary characters</p>
<p><strong>s</strong></p>
<p>:   non-newline-sensitive matching (usual default)</p>
<p><strong>t</strong></p>
<p>:   tight syntax (usual default; see below)</p>
<p><strong>w</strong></p>
<p>:   inverse partial newline-sensitive matching (see <strong>MATCHING</strong>,
    below)</p>
<p><strong>x</strong></p>
<p>:   expanded syntax (see below)</p>
</blockquote>
<p>Embedded options take effect at the <strong>)</strong> terminating the sequence. They
are available only at the start of an ARE, and may not be used later
within it.</p>
<p>In addition to the usual (<em>tight</em>) RE syntax, in which all characters
are significant, there is an <em>expanded</em> syntax, available in all flavors
of RE with the <strong>-expanded</strong> switch, or in AREs with the embedded x
option. In the expanded syntax, white-space characters are ignored and
all characters between a <strong>#</strong> and the following newline (or the end of
the RE) are ignored, permitting paragraphing and commenting a complex
RE. There are three exceptions to that basic rule:</p>
<ul>
<li>
<p>a white-space character or preceded by is retained</p>
</li>
<li>
<p>white space or within a bracket expression is retained</p>
</li>
<li>
<p>white space and comments are illegal within multi-character symbols
    like the ARE or the BRE</p>
</li>
</ul>
<p>Expanded-syntax white-space characters are blank, tab, newline, and any
character that belongs to the <em>space</em> character class.</p>
<p>Finally, in an ARE, outside bracket expressions, the sequence (where
<em>ttt</em> is any text not containing a is a comment, completely ignored.
Again, this is not allowed between the characters of multi-character
symbols like Such comments are more a historical artifact than a useful
facility, and their use is deprecated; use the expanded syntax instead.</p>
<p><em>None</em> of these metasyntax extensions is available if the application
(or an initial director) has specified that the user\'s input be treated
as a literal string rather than as an RE.</p>
<h1 id="matching">MATCHING</h1>
<p>In the event that an RE could match more than one substring of a given
string, the RE matches the one starting earliest in the string. If the
RE could match more than one substring starting at that point, its
choice is determined by its <em>preference</em>: either the longest substring,
or the shortest.</p>
<p>Most atoms, and all constraints, have no preference. A parenthesized RE
has the same preference (possibly none) as the RE. A quantified atom
with quantifier <strong>{</strong><em>m</em><strong>}</strong> or <strong>{</strong><em>m</em><strong>}?</strong> has the same preference
(possibly none) as the atom itself. A quantified atom with other normal
quantifiers (including <strong>{</strong><em>m</em><strong>,</strong><em>n</em><strong>}</strong> with <em>m</em> equal to <em>n</em>)
prefers longest match. A quantified atom with other non-greedy
quantifiers (including <strong>{</strong><em>m</em><strong>,</strong><em>n</em><strong>}?</strong> with <em>m</em> equal to <em>n</em>)
prefers shortest match. A branch has the same preference as the first
quantified atom in it which has a preference. An RE consisting of two or
more branches connected by the <strong>|</strong> operator prefers longest match.</p>
<p>Subject to the constraints imposed by the rules for matching the whole
RE, subexpressions also match the longest or shortest possible
substrings, based on their preferences, with subexpressions starting
earlier in the RE taking priority over ones starting later. Note that
outer subexpressions thus take priority over their component
subexpressions.</p>
<p>The quantifiers <strong>{1,1}</strong> and <strong>{1,1}?</strong> can be used to force longest
and shortest preference, respectively, on a subexpression or a whole RE.</p>
<blockquote>
<p><strong>NOTE:</strong> This means that you can usually make a RE be non-greedy
overall by putting <strong>{1,1}?</strong> after one of the first non-constraint
atoms or parenthesized sub-expressions in it. <em>It pays to experiment</em>
with the placing of this non-greediness override on a suitable range
of input texts when you are writing a RE if you are using this level
of complexity.</p>
<p>For example, this regular expression is non-greedy, and will match the
shortest substring possible given that will be matched as early as
possible (the quantifier does not change that):</p>
<div class="language-text highlight"><pre><span></span><code>ab{1,1}?c.*x.*cba
</code></pre></div>
<p>The atom has no greediness preference, we explicitly give one for and
the remaining quantifiers are overridden to be non-greedy by the
preceding non-greedy quantifier.</p>
</blockquote>
<p>Match lengths are measured in characters, not collating elements. An
empty string is considered longer than no match at all. For example,
matches the three middle characters of matches all ten characters of
when is matched against the parenthesized subexpression matches all
three characters, and when is matched against both the whole RE and the
parenthesized subexpression match an empty string.</p>
<p>If case-independent matching is specified, the effect is much as if all
case distinctions had vanished from the alphabet. When an alphabetic
that exists in multiple cases appears as an ordinary character outside a
bracket expression, it is effectively transformed into a bracket
expression containing both cases, so that <strong>x</strong> becomes When it appears
inside a bracket expression, all case counterparts of it are added to
the bracket expression, so that becomes and becomes</p>
<p>If newline-sensitive matching is specified, <strong>.</strong> and bracket
expressions using <strong>\^</strong> will never match the newline character (so that
matches will never cross newlines unless the RE explicitly arranges it)
and <strong>\^</strong> and <strong>\$</strong> will match the empty string after and before a
newline respectively, in addition to matching at beginning and end of
string respectively. ARE <strong>\A</strong> and <strong>\Z</strong> continue to match beginning
or end of string <em>only</em>.</p>
<p>If partial newline-sensitive matching is specified, this affects <strong>.</strong>
and bracket expressions as with newline-sensitive matching, but not
<strong>\^</strong> and <strong>\$</strong>.</p>
<p>If inverse partial newline-sensitive matching is specified, this affects
<strong>\^</strong> and <strong>\$</strong> as with newline-sensitive matching, but not <strong>.</strong> and
bracket expressions. This is not very useful but is provided for
symmetry.</p>
<h1 id="limits-and-compatibility">LIMITS AND COMPATIBILITY</h1>
<p>No particular limit is imposed on the length of REs. Programs intended
to be highly portable should not employ REs longer than 256 bytes, as a
POSIX-compliant implementation can refuse to accept such REs.</p>
<p>The only feature of AREs that is actually incompatible with POSIX EREs
is that <strong>\</strong> does not lose its special significance inside bracket
expressions. All other ARE features use syntax which is illegal or has
undefined or unspecified effects in POSIX EREs; the <strong>***</strong> syntax of
directors likewise is outside the POSIX syntax for both BREs and EREs.</p>
<p>Many of the ARE extensions are borrowed from Perl, but some have been
changed to clean them up, and a few Perl extensions are not present.
Incompatibilities of note include the lack of special treatment for a
trailing newline, the addition of complemented bracket expressions to
the things affected by newline-sensitive matching, the restrictions on
parentheses and back references in lookahead constraints, and the
longest/shortest-match (rather than first-match) matching semantics.</p>
<p>The matching rules for REs containing both normal and non-greedy
quantifiers have changed since early beta-test versions of this package.
(The new rules are much simpler and cleaner, but do not work as hard at
guessing the user\'s real intentions.)</p>
<p>Henry Spencer\'s original 1986 <em>regexp</em> package, still in widespread use
(e.g., in pre-8.1 releases of Tcl), implemented an early version of
today\'s EREs. There are four incompatibilities between <em>regexp</em>\'s
near-EREs and AREs. In roughly increasing order of significance:</p>
<ul>
<li>
<p>In AREs, <strong>\</strong> followed by an alphanumeric character is either an
    escape or an error, while in RREs, it was just another way of
    writing the alphanumeric. This should not be a problem because there
    was no reason to write such a sequence in RREs.</p>
</li>
<li>
<p><strong>{</strong> followed by a digit in an ARE is the beginning of a bound,
    while in RREs, <strong>{</strong> was always an ordinary character. Such
    sequences should be rare, and will often result in an error because
    following characters will not look like a valid bound.</p>
</li>
<li>
<p>In AREs, <strong>\</strong> remains a special character within so a literal
    <strong>\</strong> within <strong>[ ]</strong> must be written <strong>\\</strong> also gives a
    literal <strong>\</strong> within <strong>[ ]</strong> in RREs, but only truly paranoid
    programmers routinely doubled the backslash.</p>
</li>
<li>
<p>AREs report the longest/shortest match for the RE, rather than the
    first found in a specified search order. This may affect some RREs
    which were written in the expectation that the first match would be
    reported. (The careful crafting of RREs to optimize the search order
    for fast matching is obsolete (AREs examine all possible matches in
    parallel, and their performance is largely insensitive to their
    complexity) but cases where the search order was exploited to
    deliberately find a match which was <em>not</em> the longest/shortest will
    need rewriting.)</p>
</li>
</ul>
<h1 id="basic-regular-expressions">BASIC REGULAR EXPRESSIONS</h1>
<p>BREs differ from EREs in several respects. and <strong>?</strong> are ordinary
characters and there is no equivalent for their functionality. The
delimiters for bounds are <strong>\{</strong> and with <strong>{</strong> and <strong>}</strong> by themselves
ordinary characters. The parentheses for nested subexpressions are
<strong>\(</strong> and with <strong>(</strong> and <strong>)</strong> by themselves ordinary characters.
<strong>\^</strong> is an ordinary character except at the beginning of the RE or the
beginning of a parenthesized subexpression, <strong>\$</strong> is an ordinary
character except at the end of the RE or the end of a parenthesized
subexpression, and <strong>*</strong> is an ordinary character if it appears at the
beginning of the RE or the beginning of a parenthesized subexpression
(after a possible leading Finally, single-digit back references are
available, and <strong>\\&lt;</strong> and <strong>\></strong> are synonyms for and respectively;
no other escapes are available.</p>
<h1 id="see-also">SEE ALSO</h1>
<p>RegExp(3), regexp(n), regsub(n), lsearch(n), switch(n), text(n)</p>
<h1 id="keywords">KEYWORDS</h1>
<p>match, regular expression, string</p>

<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
  <li class="last-updated-holder displayDate loading">
    <span class="last-updated-text">Last updated:</span>
    <time role="presentation" datetime="2018-10-25T00:00:00.000Z" data-article-date-source="ms.date"></time>
  </li>
<!--
  <li class="readingTime">
    2 minutes to read
  </li>
-->
  <li class="contributors-holder">
    <span class="contributors-text">Contributors</span>
    <ul class="contributors" data-bi-name="contributors"></ul>
  </li>
</ul>
</div>
        <div class="col-md-3"><div class="navbar-light navbar-expand-md hidden-print sticky-top sticky-offset" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    <div id="toc-collapse" class="navbar-collapse collapse card">
        <ul class="nav flex-column bs-sidenav">
            <li class="nav-item main"><a class="nav-link" href="#name">NAME</a></li>
            <li class="nav-item main"><a class="nav-link" href="#description">DESCRIPTION</a></li>
            <li class="nav-item main"><a class="nav-link" href="#different-flavors-of-res">DIFFERENT FLAVORS OF REs</a></li>
            <li class="nav-item main"><a class="nav-link" href="#regular-expression-syntax">REGULAR EXPRESSION SYNTAX</a></li>
                <li class="nav-item">
                    <a href="#quantifiers" class="nav-link">QUANTIFIERS</a>
                </li>
                <li class="nav-item">
                    <a href="#atoms" class="nav-link">ATOMS</a>
                </li>
                <li class="nav-item">
                    <a href="#constraints" class="nav-link">CONSTRAINTS</a>
                </li>
            <li class="nav-item main"><a class="nav-link" href="#bracket-expressions">BRACKET EXPRESSIONS</a></li>
                <li class="nav-item">
                    <a href="#character-classes" class="nav-link">CHARACTER CLASSES</a>
                </li>
                <li class="nav-item">
                    <a href="#bracketed-constraints" class="nav-link">BRACKETED CONSTRAINTS</a>
                </li>
                <li class="nav-item">
                    <a href="#collating-elements" class="nav-link">COLLATING ELEMENTS</a>
                </li>
                <li class="nav-item">
                    <a href="#equivalence-classes" class="nav-link">EQUIVALENCE CLASSES</a>
                </li>
            <li class="nav-item main"><a class="nav-link" href="#escapes">ESCAPES</a></li>
                <li class="nav-item">
                    <a href="#character-entry-escapes" class="nav-link">CHARACTER-ENTRY ESCAPES</a>
                </li>
                <li class="nav-item">
                    <a href="#class-shorthand-escapes" class="nav-link">CLASS-SHORTHAND ESCAPES</a>
                </li>
                <li class="nav-item">
                    <a href="#constraint-escapes" class="nav-link">CONSTRAINT ESCAPES</a>
                </li>
                <li class="nav-item">
                    <a href="#back-references" class="nav-link">BACK REFERENCES</a>
                </li>
            <li class="nav-item main"><a class="nav-link" href="#metasyntax">METASYNTAX</a></li>
            <li class="nav-item main"><a class="nav-link" href="#matching">MATCHING</a></li>
            <li class="nav-item main"><a class="nav-link" href="#limits-and-compatibility">LIMITS AND COMPATIBILITY</a></li>
            <li class="nav-item main"><a class="nav-link" href="#basic-regular-expressions">BASIC REGULAR EXPRESSIONS</a></li>
            <li class="nav-item main"><a class="nav-link" href="#see-also">SEE ALSO</a></li>
            <li class="nav-item main"><a class="nav-link" href="#keywords">KEYWORDS</a></li>
        </ul>
    </div>
</div></div>
      </div>
      </div>

      <footer class="col-md-12">
	<hr>
	<div class="container">
	</div>
      </footer>
      <script>
	var base_url = "../..",
            shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
      </script>
      <script src="../../js/base.js" defer></script>
      <script src="../../search/main.js" defer></script>

      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <p class="h4 modal-title">Keyboard Shortcuts</p>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
