<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://www.tcl.tk/man/TclCmd/memory/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>NAME - Tcl/Tk</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "NAME";
        var mkdocs_page_input_path = "TclCmd\\memory.md";
        var mkdocs_page_url = "/man/TclCmd/memory/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]--> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Tcl/Tk
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">Tcl/Tk</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">ItclCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ItclCmd/">ItclCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">ItclLib</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ItclLib/">ItclLib</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Keywords</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Keywords/">Keywords</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">SqliteCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../SqliteCmd/">SqliteCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TclCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../">TclCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TclLib</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../TclLib/">TclLib</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TdbcCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../TdbcCmd/">TdbcCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TdbcLib</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../TdbcLib/">TdbcLib</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TdbcmysqlCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../TdbcmysqlCmd/">TdbcmysqlCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TdbcodbcCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../TdbcodbcCmd/">TdbcodbcCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TdbcpostgresCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../TdbcpostgresCmd/">TdbcpostgresCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">ThreadCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ThreadCmd/">ThreadCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TkCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../TkCmd/">TkCmd</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">TkLib</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../TkLib/">TkLib</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">UserCmd</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../UserCmd/">UserCmd</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Tcl/Tk</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>NAME</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="name">NAME</h1>
<p>memory - Control Tcl memory debugging capabilities</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p><strong>memory </strong><em>option </em>?<em>arg arg ...</em>?</p>
<h1 id="description">DESCRIPTION</h1>
<p>The <strong>memory</strong> command gives the Tcl developer control of Tcl\'s memory
debugging capabilities. The memory command has several suboptions, which
are described below. It is only available when Tcl has been compiled
with memory debugging enabled (when <strong>TCL_MEM_DEBUG</strong> is defined at
compile time), and after <strong>Tcl_InitMemory</strong> has been called.</p>
<p><strong>memory active</strong> <em>file</em></p>
<p>:   Write a list of all currently allocated memory to the specified
    <em>file</em>.</p>
<p><strong>memory break_on_malloc</strong> <em>count</em></p>
<p>:   After the <em>count</em> allocations have been performed, <strong>ckalloc</strong>
    outputs a message to this effect and that it is now attempting to
    enter the C debugger. Tcl will then issue a <em>SIGINT</em> signal against
    itself. If you are running Tcl under a C debugger, it should then
    enter the debugger command mode.</p>
<p><strong>memory info</strong></p>
<p>:   Returns a report containing the total allocations and frees since
    Tcl began, the current packets allocated (the current number of
    calls to <strong>ckalloc</strong> not met by a corresponding call to <strong>ckfree</strong>),
    the current bytes allocated, and the maximum number of packets and
    bytes allocated.</p>
<p><strong>memory init </strong>[<strong>on</strong>|<strong>off</strong>]</p>
<p>:   Turn on or off the pre-initialization of all allocated memory with
    bogus bytes. Useful for detecting the use of uninitialized values.</p>
<p><strong>memory objs </strong><em>file</em></p>
<p>:   Causes a list of all allocated Tcl_Obj values to be written to the
    specified <em>file</em> immediately, together with where they were
    allocated. Useful for checking for leaks of values.</p>
<p><strong>memory onexit</strong> <em>file</em></p>
<p>:   Causes a list of all allocated memory to be written to the specified
    <em>file</em> during the finalization of Tcl\'s memory subsystem. Useful
    for checking that memory is properly cleaned up during process exit.</p>
<p><strong>memory tag</strong> <em>string</em></p>
<p>:   Each packet of memory allocated by <strong>ckalloc</strong> can have associated
    with it a string-valued tag. In the lists of allocated memory
    generated by <strong>memory active</strong> and <strong>memory onexit</strong>, the tag for
    each packet is printed along with other information about the
    packet. The <strong>memory tag</strong> command sets the tag value for subsequent
    calls to <strong>ckalloc</strong> to be <em>string</em>.</p>
<p><strong>memory trace </strong>[<strong>on</strong>|<strong>off</strong>]</p>
<p>:   Turns memory tracing on or off. When memory tracing is on, every
    call to <strong>ckalloc</strong> causes a line of trace information to be written
    to <em>stderr</em>, consisting of the word <em>ckalloc</em>, followed by the
    address returned, the amount of memory allocated, and the C filename
    and line number of the code performing the allocation. For example:</p>
<div class="language-text highlight"><pre><span></span><code>    ckalloc 40e478 98 tclProc.c 1406

Calls to **ckfree** are traced in the same manner.
</code></pre></div>
<p><strong>memory trace_on_at_malloc</strong> <em>count</em></p>
<p>:   Enable memory tracing after <em>count</em> <strong>ckalloc</strong>s have been
    performed. For example, if you enter <strong>memory trace_on_at_malloc
    100</strong>, after the 100th call to <strong>ckalloc</strong>, memory trace information
    will begin being displayed for all allocations and frees. Since
    there can be a lot of memory activity before a problem occurs,
    judicious use of this option can reduce the slowdown caused by
    tracing (and the amount of trace information produced), if you can
    identify a number of allocations that occur before the problem sets
    in. The current number of memory allocations that have occurred
    since Tcl started is printed on a guard zone failure.</p>
<p><strong>memory validate </strong>[<strong>on</strong>|<strong>off</strong>]</p>
<p>:   Turns memory validation on or off. When memory validation is
    enabled, on every call to <strong>ckalloc</strong> or <strong>ckfree</strong>, the guard zones
    are checked for every piece of memory currently in existence that
    was allocated by <strong>ckalloc</strong>. This has a large performance impact
    and should only be used when overwrite problems are strongly
    suspected. The advantage of enabling memory validation is that a
    guard zone overwrite can be detected on the first call to
    <strong>ckalloc</strong> or <strong>ckfree</strong> after the overwrite occurred, rather than
    when the specific memory with the overwritten guard zone(s) is
    freed, which may occur long after the overwrite occurred.</p>
<h1 id="see-also">SEE ALSO</h1>
<p>ckalloc, ckfree, Tcl_ValidateAllMemory, Tcl_DumpActiveMemory,
TCL_MEM_DEBUG</p>
<h1 id="keywords">KEYWORDS</h1>
<p>memory, debug</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
